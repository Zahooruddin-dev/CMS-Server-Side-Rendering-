<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

<div class="container">
    <h1><%= post ? 'Edit Post' : 'New Post' %></h1>
    
    <% if (messages.error) { %>
        <div class="alert alert-error"><%= messages.error %></div>
    <% } %>
    
    <form action="<%= post ? '/admin/posts/update/' + post.id : '/admin/posts/create' %>" method="POST" class="post-form">
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" id="title" name="title" value="<%= post ? post.title : '' %>" required>
        </div>
        
        <div class="form-group">
            <label for="content">Content</label>
            <textarea id="content" name="content" rows="15" required><%= post ? post.content : '' %></textarea>
        </div>
        
        <div class="form-group">
            <label for="status">Status</label>
            <select id="status" name="status">
                <option value="draft" <%= post && post.status === 'draft' ? 'selected' : '' %>>Draft</option>
                <option value="published" <%= post && post.status === 'published' ? 'selected' : '' %>>Published</option>
            </select>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary"><%= post ? 'Update' : 'Create' %> Post</button>
            <a href="/admin/posts" class="btn">Cancel</a>
        </div>
    </form>
</div>

<%- include('../partials/footer') %>